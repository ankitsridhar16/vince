{{define "_notice"}}
{{template "_flash" .}}
{{if .CurrentUser}}

{{if .CurrentUser.GracePeriod.Active}}
<div class="flash  flash-warn">
    <h3>
        {{if .CurrentUser.EnterprisePlan}}
        You have outgrown your VINCE subscription tier
        {{else}}
        Please upgrade your account
        {{end}}
    </h3>
    <p class="mt2 text-sm ">
        {{if .CurrentUser.EnterprisePlan}}
        In order to keep your stats running, we require you to upgrade
        your account to accommodate your new usage levels. Please contact
        us to discuss a new custom enterprise plan.
        {{else}}
        In order to keep your stats running, we require you to upgrade
        your account. If you do not upgrade your account In the following days we will
        lock your stats and they won't be accessible.
        {{end}}
    </p>
    <form action="/settings" method="get">
        <button type="submit" class="btn btn-sm flash-action">Upgrade now →</button>
    </form>
</div>
{{end}}

{{if .CurrentUser.GracePeriod.Expired}}
<div class="flash  flash-warn">
    <h2 class="text-sm">
        Dashboard locked
    </h2>
    <p>
        As you have outgrown your subscription tier, we kindly ask you to
        upgrade your subscription to accommodate your new traffic levels.
    </p>
    <form action="/settings" method="get">
        <button type="submit" class="btn btn-sm flash-action">Upgrade now →</button>
    </form>
</div>
{{end}}

{{if .CurrentUser.Subscription.CheckStatus "past_due"}}
<div class="flash  flash-warn">
    <p>
        There was a problem with your latest payment. Please update your payment information to keep using VINCE
    </p>
    <form action="{{.CurrentUser.Subscription.UpdateURL}}" method="get">
        <button type="submit" class="btn btn-sm flash-action">Update billing info →</button>
    </form>
</div>
{{end}}

{{if .CurrentUser.Subscription.CheckStatus "paused"}}
<div class="flash  flash-warn">
    <p>
        Your subscription is paused due to failed payments. Please provide valid payment details to keep using
        VINCE.
    </p>
    <form action="{{.CurrentUser.Subscription.UpdateURL}}" method="get">
        <button type="submit" class="btn btn-sm flash-action">Update billing info →</button>
    </form>
</div>
{{end}}


{{end}}
{{end}}