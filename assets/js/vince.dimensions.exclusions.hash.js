(function(){"use strict";var n=window.location,c=window.document,t=c.currentScript,b=t.getAttribute("data-api")||y(t);function u(i){console.warn("Ignoring Event: "+i)}function y(i){return new URL(i.src).origin+"/api/event"}function d(i,a){if(/^localhost$|^127(\.[0-9]+){0,2}\.[0-9]+$|^\[::1?\]$/.test(n.hostname)||n.protocol==="file:")return u("localhost");if(window._phantom||window.__nightmare||window.navigator.webdriver||window.Cypress)return;try{if(window.localStorage.vince_ignore==="true")return u("localStorage flag")}catch(r){}var p=t&&t.getAttribute("data-include"),h=t&&t.getAttribute("data-exclude");if(i==="pageview"){var S=!p||p&&p.split(",").some(m),E=h&&h.split(",").some(m);if(!S||E)return u("exclusion rule")}function m(r){var l=n.pathname;return l+=n.hash,l.match(new RegExp("^"+r.trim().replace(/\*\*/g,".*").replace(/([^\.])\*/g,"$1[^\\s/]*")+"/?$"))}var e={};e.n=i,e.u=n.href,e.d=t.getAttribute("data-domain"),e.r=c.referrer||null,e.w=window.innerWidth,a&&a.meta&&(e.m=JSON.stringify(a.meta)),a&&a.props&&(e.p=a.props);var q=t.getAttributeNames().filter(function(r){return r.substring(0,6)==="event-"}),w=e.p||{};q.forEach(function(r){var l=r.replace("event-",""),x=t.getAttribute(r);w[l]=w[l]||x}),e.p=w,e.h=1;var o=new XMLHttpRequest;o.open("POST",b,!0),o.setRequestHeader("Content-Type","text/plain"),o.send(JSON.stringify(e)),o.onreadystatechange=function(){o.readyState===4&&a&&a.callback&&a.callback()}}var g=window.vince&&window.vince.q||[];window.vince=d;for(var s=0;s<g.length;s++)d.apply(this,g[s]);var f;function v(){f=n.pathname,d("pageview")}window.addEventListener("hashchange",v);function A(){!f&&c.visibilityState==="visible"&&v()}c.visibilityState==="prerender"?c.addEventListener("visibilitychange",A):v()})();
