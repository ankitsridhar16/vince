(function(){"use strict";var o=window.location,n=window.document,i=n.currentScript,w=i.getAttribute("data-api")||y(i);function h(r){console.warn("Ignoring Event: "+r)}function y(r){return new URL(r.src).origin+"/api/event"}function l(r,t){try{if(window.localStorage.vince_ignore==="true")return h("localStorage flag")}catch(u){}var e={};e.n=r,e.u=o.href,e.d=i.getAttribute("data-domain"),e.r=n.referrer||null,e.w=window.innerWidth,t&&t.meta&&(e.m=JSON.stringify(t.meta)),t&&t.props&&(e.p=t.props);var m=i.getAttributeNames().filter(function(u){return u.substring(0,6)==="event-"}),v=e.p||{};m.forEach(function(u){var g=u.replace("event-",""),E=i.getAttribute(u);v[g]=v[g]||E}),e.p=v;var a=new XMLHttpRequest;a.open("POST",w,!0),a.setRequestHeader("Content-Type","text/plain"),a.send(JSON.stringify(e)),a.onreadystatechange=function(){a.readyState===4&&t&&t.callback&&t.callback()}}var f=window.vince&&window.vince.q||[];window.vince=l;for(var d=0;d<f.length;d++)l.apply(this,f[d]);var p;function c(){p!==o.pathname&&(p=o.pathname,l("pageview"))}var s=window.history;if(s.pushState){var b=s.pushState;s.pushState=function(){b.apply(this,arguments),c()},window.addEventListener("popstate",c)}function S(){!p&&n.visibilityState==="visible"&&c()}n.visibilityState==="prerender"?n.addEventListener("visibilitychange",S):c()})();
