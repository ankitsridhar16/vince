(function(){"use strict";var i=window.location,n=window.document,o=n.currentScript,L=o.getAttribute("data-api")||b(o);function s(t){console.warn("Ignoring Event: "+t)}function b(t){return new URL(t.src).origin+"/api/event"}function f(t,e){if(/^localhost$|^127(\.[0-9]+){0,2}\.[0-9]+$|^\[::1?\]$/.test(i.hostname)||i.protocol==="file:")return s("localhost");if(window._phantom||window.__nightmare||window.navigator.webdriver||window.Cypress)return;try{if(window.localStorage.vince_ignore==="true")return s("localStorage flag")}catch(y){}var a=o&&o.getAttribute("data-include"),u=o&&o.getAttribute("data-exclude");if(t==="pageview"){var d=!a||a&&a.split(",").some(m),$=u&&u.split(",").some(m);if(!d||$)return s("exclusion rule")}function m(y){var q=i.pathname;return q.match(new RegExp("^"+y.trim().replace(/\*\*/g,".*").replace(/([^\.])\*/g,"$1[^\\s/]*")+"/?$"))}var r={};r.n=t,r.u=i.href,r.d=o.getAttribute("data-domain"),r.r=n.referrer||null,r.w=window.innerWidth,e&&e.meta&&(r.m=JSON.stringify(e.meta)),e&&e.props&&(r.p=e.props);var c=new XMLHttpRequest;c.open("POST",L,!0),c.setRequestHeader("Content-Type","text/plain"),c.send(JSON.stringify(r)),c.onreadystatechange=function(){c.readyState===4&&e&&e.callback&&e.callback()}}var g=window.vince&&window.vince.q||[];window.vince=f;for(var p=0;p<g.length;p++)f.apply(this,g[p]);var h;function l(){h!==i.pathname&&(h=i.pathname,f("pageview"))}var w=window.history;if(w.pushState){var E=w.pushState;w.pushState=function(){E.apply(this,arguments),l()},window.addEventListener("popstate",l)}function S(){!h&&n.visibilityState==="visible"&&l()}n.visibilityState==="prerender"?n.addEventListener("visibilitychange",S):l();function k(t){for(;t&&(typeof t.tagName=="undefined"||!C(t)||!t.href);)t=t.parentNode;return t}function C(t){return t&&t.tagName&&t.tagName.toLowerCase()==="a"}function x(t,e){if(t.defaultPrevented)return!1;var a=!e.target||e.target.match(/^_(self|parent|top)$/i),u=!(t.ctrlKey||t.metaKey||t.shiftKey)&&t.type==="click";return a&&u}var O=1;function v(t){if(!(t.type==="auxclick"&&t.button!==O)){var e=k(t.target),a=e&&e.href&&e.href.split("?")[0];if(N(e))return _(t,e,{name:"Outbound Link: Click",props:{url:e.href}})}}function _(t,e,a){var u=!1;function d(){u||(u=!0,window.location=e.href)}x(t,e)?(vince(a.name,{props:a.props,callback:d}),setTimeout(d,5e3),t.preventDefault()):vince(a.name,{props:a.props})}n.addEventListener("click",v),n.addEventListener("auxclick",v);function N(t){return t&&t.href&&t.host&&t.host!==i.host}})();
