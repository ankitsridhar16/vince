(function(){"use strict";var l=window.location,i=window.document,t=i.currentScript,m=t.getAttribute("data-api")||y(t);function g(n){console.warn("Ignoring Event: "+n)}function y(n){return new URL(n.src).origin+"/api/event"}function d(n,a){try{if(window.localStorage.vince_ignore==="true")return g("localStorage flag")}catch(r){}var s=t&&t.getAttribute("data-include"),h=t&&t.getAttribute("data-exclude");if(n==="pageview"){var S=!s||s&&s.split(",").some(b),E=h&&h.split(",").some(b);if(!S||E)return g("exclusion rule")}function b(r){var u=l.pathname;return u+=l.hash,u.match(new RegExp("^"+r.trim().replace(/\*\*/g,".*").replace(/([^\.])\*/g,"$1[^\\s/]*")+"/?$"))}var e={};e.n=n,e.u=l.href,e.d=t.getAttribute("data-domain"),e.r=i.referrer||null,e.w=window.innerWidth,a&&a.meta&&(e.m=JSON.stringify(a.meta)),a&&a.props&&(e.p=a.props);var q=t.getAttributeNames().filter(function(r){return r.substring(0,6)==="event-"}),p=e.p||{};q.forEach(function(r){var u=r.replace("event-",""),x=t.getAttribute(r);p[u]=p[u]||x}),e.p=p,e.h=1;var c=new XMLHttpRequest;c.open("POST",m,!0),c.setRequestHeader("Content-Type","text/plain"),c.send(JSON.stringify(e)),c.onreadystatechange=function(){c.readyState===4&&a&&a.callback&&a.callback()}}var f=window.vince&&window.vince.q||[];window.vince=d;for(var o=0;o<f.length;o++)d.apply(this,f[o]);var w;function v(){w=l.pathname,d("pageview")}window.addEventListener("hashchange",v);function A(){!w&&i.visibilityState==="visible"&&v()}i.visibilityState==="prerender"?i.addEventListener("visibilitychange",A):v()})();
